#compdef busted
#autoload

#alias rbu="unfunction _busted; autoload -U _busted"

local -a _busted_args
_busted_args=(
"--cpath=:Optional path to be prefixed to the Lua C module search path (default: ./csrc/?.so;./csrc/?/?.so;)"
"--defer-print:Defer print to when test suite is complete"
"--exclude-tags=:Do not run tests with these #tags, takes precedence over --tags"
"--lang=:Language for error messages (default: en)"
"--repeat=:Run the tests repeatedly (default: 1)"
"--seed=:Random seed value to use for shuffing test order (default: os.time())"
"--randomize:Force randomized test order"
"--shuffle:Force randomized test order (alias for --randomize)"
"--suppress-pending:Supress 'pending' test output"
"--version:Prints the program's version and exits"
"--helper:A helper script that is run before tests"
"-c:Do code coverage analysis (requires 'LuaCov' to be installed) --coverage "
"-d:Path to current working directory (default: ./) --cwd=cwd "
"-h:Help"
"-m:Optional path to be prefixed to the Lua module search path (default: ./src/?.lua;./src/?/?.lua;./src/?/init.lua) --lpath=path "
"-o:Output library to load (default: utf_terminal) --output=LIBRARY "
"-p:Only run test files matching the Lua pattern (default: _spec) --pattern=pattern "
"-r:Config to run from .busted file --run=run "
"-s:Executes 'say' command if available --enable-sound "
"-t:Only run tests with these #tags --tags=tags "
"-v:Verbose output of errors --verbose "
)

_describe -t commands "busted args" _busted_args
